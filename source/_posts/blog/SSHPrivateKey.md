---
title: Connect the Linux Server By Private Key in WinSCP Software
date: 2024-02-09 21:06:25
toc: true
tags:
    - Project Tools
categories: blog
excerpt: This post tells how to connect the linux server when we only get the permission generated by public key .
---
## Introduction of WinSCP
WinSCP (Windows Secure Copy) is a free and open-source graphical SFTP (SSH File Transfer Protocol), SCP (Secure Copy Protocol), FTP (File Transfer Protocol), and WebDAV (Web Distributed Authoring and Versioning) client for the Windows operating system. It allows users to securely transfer files between a local computer and a remote computer.

## User Account Generate
Sometimes, the linux server only uses public key to generate user account instead of IP address and password so we need to generate the private key first.
### Generate the Private Key
Open the `git` terminal and run the following command:
```bash
ssh-keygen -t rsa
```
After running, we can get the `id_rsa` file in the `.ssh` directory and the `id_rsa.pub` file in the same directory.
### Add the Public Key to the Server
Once got the public key, we can just use it to create a new user account on the server. The following command is used to add the public key to the server.
```bash
ssh-copy-id -i ~/.ssh/id_rsa.pub zhli@cwfang.tpddns.cn
```

## WinSCP Configuration
+ Firstly, we need to open the WinSCP and click the 'Tools' button to `Run PuTTYgen`:

<img src="https://cdn.jsdelivr.net/gh/LZHMS/picx-images-hosting@master/EBlog/Learning/image.4106n24rk6g0.webp" alt="Run PuTTYgen" width='70%'/>

+ Then, click `Load ` button to find previously generated private key file(`id_rsa`):

<img src="https://cdn.jsdelivr.net/gh/LZHMS/picx-images-hosting@master/EBlog/Learning/image.3zpig86yuiw0.webp" alt="Load Private Key" width='70%'/>

There when we choose the key file, it's necessary to switch target file type to `All Files(*.*)` for matching.
+ After that, just wait for processing and finally we can `Save private key` in the format of `.ppk`:

<img src="https://cdn.jsdelivr.net/gh/LZHMS/picx-images-hosting@master/EBlog/Learning/image.2ibzjru2nwu0.webp" alt="Save Private Key" width='70%'/>

`.ppk` format is a need for WinSCP to obtain the local computer's authorization to the linux server.

+ Config the private key in WinSCP globally
In `Advanced` module we can find the `Authentication` interface used for SSH connection. In this module, `Private key file` 
is used to select the private key file ending with `.ppk` format.

<img src="https://cdn.jsdelivr.net/gh/LZHMS/picx-images-hosting@master/EBlog/Learning/image.1qzg1vz06irk.webp" alt="Config Private Key" width='70%'/>

The generated `.ppk` file is just our private key file and it is used to match the public key file in the linux server. In this way, we can just use WinSCP to upload the file to the linux server.

## WinSCP Connection
Finishing above steps, it's just time to use WinSCP to connect to the linux server.
+ In WinSCP, we can find the `Session` interface to set up the connection.
+ In `Session` interface, we can set up the connection information, including the server domain(Host name), username, password, port.

<img src="https://cdn.jsdelivr.net/gh/LZHMS/picx-images-hosting@master/EBlog/Learning/image.4dmzmn71x1q0.webp" alt="WinSCP Connection" width='70%'/>